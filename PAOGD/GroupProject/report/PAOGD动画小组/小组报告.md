# 中山大学数据科学与计算机学院本科生实验报告

## （2019年春季学期）

| 课程名称 | 动画原理与网络游戏设计 | 任课老师 |         郑贵锋         |
| :------: | :--------------------: | :------: | :--------------------: |
|   年级   |         2016级         |   专业   |        软件工程        |
|   组名   |     PAOGD动画小组      |   成员   | 邵梓硕，王广浩，王德超 |
|   分组   |        动画小组        | 完成日期 |       2019.7.15        |

------

### 动画内容

我们的动画内容参考并复现了电影《导火线》中经典的邹兆龙和甄子丹的打斗场景的前面一部分。总时长约30秒，在动画中白色人物模型代表邹兆龙，紫色人物模型代表甄子丹，并简单地搭建了小屋的场景和灯光。

- 人物：邹子龙，甄子丹
- 场景：小屋
- 动画内容：打斗

具体内容可见《说明文档》

### 构思

在课堂上我们主要学习了动画中的人物部分，包括蒙皮绑定，关键帧等，因此我们准备将重点放在人物动画上，并且是不采用特效的肉搏，这样的内容虽然看起来很不起眼，但是它的工作量是非常大的，正是因为主要依靠的是人物动作而不hi特效，因此关键帧就会非常多，每个关键帧需要摆一个造型，双人对打时关键帧数就会成倍增长，再加上镜头的移动和切换，实际上光是实现这样一个简短的动画就花费了我们很长时间。

关于选题，虽然确定了肉搏，但具体做什么呢？

以动作为重点的内容，光靠自己去想是很难做到“好看”的，因此我们选择了参考武打戏，我们复现他们动作的方式。说到武打戏，其实在动画、真人TV、电影中都很常见，但最为经典的还是香港的动作片，其中，《导火线》中邹兆龙和甄子丹的打戏被称为“打戏的教科书”，非常经典，一提出马上就决定了把它作为实现内容。

### 分工

对于人物动画，我们三个人每个人均等地拿1/3打戏来做，按顺序分别为邵梓硕、王广浩、王德超。

- 前1/3：邵梓硕。扔掉枪械 --》 邹兆龙挥拳，甄子丹转身躲避
- 中1/3：王广浩。--》 踢碎箱子
- 最后1/3：王德超。--》 跳出屋子

对于其他模型，比如人物和场景，基本上是有人做了一个原型，其他人进行修改，最终成型。

其他见《成员分工及贡献表》

### 具体实现 & 问题收集 & 思考经验

主要记述每个人在实现过程中遇到的困难和解决方法，或者是他的一些思考，部分可以在个人报告中见到：

### 邵梓硕

#### 1. 贴合实际的躯干蒙皮

人物模型原型有一个比较大的缺陷：身体有一个圆柱构成，没有所谓的“腰部”，实际上人的躯干主要有三个：胸腔、腹部/腰部、骨盆。因此采用原型的时候一些转身，后仰，前仰时会很不自然，修改的主要步骤：

- 在原躯干的基础上进行3次分割，进行2次以上是为了在弯曲的时候会更加自然
- 对最上方的部分进行形状上的修改，使之尽量符合人体结构
- 调整分割线的大小，形成有粗细变化的躯干

最终效果：

![](16340189_%E9%82%B5%E6%A2%93%E7%A1%95/images/body.png) ![](16340189_%E9%82%B5%E6%A2%93%E7%A1%95/images/people2.png)

#### 2. 多机位

我负责的打斗中我们可以分析出它利用了三个主要机位：A斜后方机位1，AB之间的机位2，B斜后方的机位3。因此在实际制作过程中，这段我利用了三个摄像机，渲染出三个视频片段后通过剪辑得到最终的片段。

##### 摄像机表

| 摄像机 | 机位                                              | 镜头数 |
| ------ | ------------------------------------------------- | ------ |
| 1号机  | A的斜背后（五个经典机位中的2号位），可以看到B。   | 3      |
| 2号机  | A，B之间（五个经典机位中的3号机），可以看到A和B。 | 3      |
| 3号机  | B的斜背后（五个经典机位中的4号机），可以看到A。   | 2      |

这里还牵涉到怎么在渲染的过程中怎么切换到其他摄像机：

属性面板 --》 场景 --》 摄像机，渲染时选择相应的摄像机。

![](16340189_%E9%82%B5%E6%A2%93%E7%A1%95/images/camera.png)

#### 3. 预备动作和时间间距

我负责的其中一些动作的难度较大，有些则可以基本上复制粘贴使用，分别取一个例子来说一下：

##### （1）踢击

主要动作是A的踢击，然而单单用两个关键帧：初始的站立姿势，空中的踢腿姿势是远远不够的。这里需要了解一下动画的运动法则之二：预备动作和时间间距。

**预备动作**：运动对象要进行一个动作时，会有一个向相反方向趋向的预备动作，比如A要跳起来踢向B，会有一个屈膝向下的蓄力动作

**时间间距**：动画中两个关键帧之间时间间隔越短，动作发生地越快，对于蓄力+踢击过程，为了显示踢击的力度，一般会让蓄力的时间 >> 踢击的时间，简单地调整节奏会让动作效果更好。

![](16340189_%E9%82%B5%E6%A2%93%E7%A1%95/images/kick.gif)

##### （2）连续直拳

6号动作节点的主要动作是连续的直拳，因此省力的方法就是做好左直拳和右直拳的两个动作，之后直接复制粘贴这两个动作，只调节人物的水平位置即可。但也不是简单的平移即可，要注意人物的左右脚的移动，左脚向前保证右脚在原地，右脚向前保证左脚在原地，防止穿帮。

##### （3）速度曲线

就像上面讲的，动画师通过控制时间间隔来控制动作节奏，比如两个关键帧：屈臂和伸臂，来模仿直拳，但是想要实现的效果不同可能会有淡入（屈臂到伸臂的前半段时间较长）和淡出（屈臂到伸臂的后半段时间较长），这个可以在曲线图中进行调节。

#### 4. 对自动补帧的思考

3D动画的优点，也是缺点之一：自动补帧，它使得动画师可以相比于传统动画师利用更少的枚数（动画师需要绘制的画面数）来实现动作，并且使动作更加流畅，但它也带来了相对于传统作画的劣势：打击感。

传统作画中会有许多方式来增加动作的打击感：空气特效、速度线、形变、模糊、周围环境的反应等等，在自动补帧的作用下，使得形变、速度线、模糊这些操作反而变得麻烦或不可靠，

另一个传统作画中打击感的优秀例子是两步作画，它只利用两个打击的过程：超长的蓄力/慢动作，夸张的打击结果，它没有“打击”这一个动作，直接在蓄力的后面接上了夸张的打击结果，在超长蓄力/慢动作的对比下会获得惊人的打击效果，这也是时间间距的实例，代表画师为日本的中村丰。而自动补帧由于它主要来赋予两个关键帧之间“过渡”，反而不利于这种方法的实现。

因此自动补帧下生成的动画往往打击感上会比不上传统动画，特别是像这样拳拳到肉的互博，我也只能尽量调整帧之间的速度变化来补救。

### 王广浩

#### 1. 人物模型的创建和修改

人物模型原型由我和另一个队友合作制作：

![1563181855143](../PAOGD%E5%8A%A8%E7%94%BB%E5%B0%8F%E7%BB%84/16340211_%E7%8E%8B%E5%B9%BF%E6%B5%A9/assets/1563181855143.png) 



原型是一个比较基本的火柴人，驱赶部分是一个整体的圆柱，顶部进行了处理，形成了脖子。下身分为3部分：大腿、小腿、脚。胳膊同样分为3个部分，与骨骼类似。头部直接采用了一个球体。在附加骨骼和蒙皮后，发现在做一些比较大幅度的动作时，骨骼会整个露出，同时动作也很不自然。主要是在躯干部分。原因是我们采用了内置的人体骨架，对于躯干部分，采用了3块骨骼，解决办法是在圆柱上进行细分，将圆柱面分割为几个部分。

#### 2. 人物动画

复现部分：

![part2](../PAOGD%E5%8A%A8%E7%94%BB%E5%B0%8F%E7%BB%84/16340211_%E7%8E%8B%E5%B9%BF%E6%B5%A9/assets/part2.gif)

##### 人物动作

| 主要动作节点    | 1      | 2                        | 3            | 4                           | 5        | 6        | 7                  | 8            |
| --------------- | ------ | ------------------------ | ------------ | --------------------------- | -------- | -------- | ------------------ | ------------ |
| A（**邹兆龙**） | 右拳击 | 左拳击                   | 右拳击       | 双手抓住B的肩膀将其推倒墙上 | 左肘击   | 左肘击   | 左腿踢             | 左腿踢破箱子 |
| B（**甄子丹**） | 回避   | 反身用另一只手臂进行攻击 | 低头躲避攻击 | 双手抱A头                   | 左臂防御 | 右臂防御 | 两臂弯曲在头前防御 | 快速起身逃跑 |

动作中最难的应该是两次左腿踢，尤其是第二次，踢的同时移动，又踢破了箱子，做了很久这个动作，但是感觉还是不那么自然，尤其的右腿的摆放问题。其次就是甄子丹逃跑的动作，必须在脚到之前，还要弯腰抱头，同时是侧着躲避攻击的，这部分在很多的时间却插了7个帧。

摄像机采用了一个，对于不同的镜头，对摄像机进行位移变换和旋转变化，有一个变化幅度较大，画面出现了轻微的抖动。

### 王德超



